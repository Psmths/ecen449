#include <xparameters.h>
#include <xgpio.h>
#include <xstatus.h>
#include <xil_printf.h>

//Definitions
#define GPIO_DEVICE_ID_LED XPAR_LED_DEVICE_ID //From xparams.h include
#define GPIO_DEVICE_ID_SWS XPAR_SWS_DEVICE_ID // ^
#define WAIT_VAL 10000000 //wait value used to divide the clock

int delay (void);

int main(){

	int count; //how many times we go through the while loop in total
	int count_masked; //the first 4 bits (what is shown on the LEDs)
	XGpio leds; //GPIO output led port
	XGpio sws;
	int status; //tells us if we successfully initialize the GPIO device

	//Init LED GPIO
	status = XGpio_Initialize(&leds, GPIO_DEVICE_ID_LED);
	XGpio_SetDataDirection(&leds, 1, 0x00); //data direction (1 for input, 0 for output)
	if (status != XST_SUCCESS) { xil_printf("Initialization failed for LEDs"); }

	//Init SWITCHES and BUTTONS GPIO
	status = XGpio_Initialize(&sws, GPIO_DEVICE_ID_SWS);
	XGpio_SetDataDirection(&sws, 1, 0x00); //data direction (1 for input, 0 for output)
	if (status != XST_SUCCESS) { xil_printf("Initialization failed"); }


	count = 0; //counter variable set to 0 before program begins looping



}

int delay(void) {
	volatile int delay_count = 0; //volatile prevents compiler from applying optimizations to changing variables
	while(delay_count < WAIT_VAL)
		delay_count++; //keep looping until we reach WAIT_VAL (10,000,000 cycles define above)
	return (0);
}
